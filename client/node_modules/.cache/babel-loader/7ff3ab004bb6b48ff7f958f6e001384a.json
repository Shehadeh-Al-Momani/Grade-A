{"ast":null,"code":"var _jsxFileName = \"E:\\\\JCA\\\\Projects\\\\Project-5\\\\Grade-A\\\\Front-End\\\\src\\\\components\\\\Login.js\";\nimport React, { useState } from 'react';\nimport logo from './pics/logo.png';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\nimport jwt_decode from 'jwt-decode';\n\nconst Login = () => {\n  const history = useHistory();\n  const [email, setemail] = useState('');\n  const [password, setpassword] = useState('');\n  const [logErr, setlogErr] = useState('');\n\n  const emailHandler = e => {\n    setemail(e.target.value);\n    setlogErr(false);\n  };\n\n  const passHandler = e => {\n    setpassword(e.target.value);\n    setlogErr(false);\n  };\n\n  const login = (email, password) => {\n    axios.post(`http://localhost:5000/login`, {\n      email,\n      password\n    }).then(response => {\n      if (response.data === 'Invalid Email or password..') {\n        setlogErr(true);\n      } else {\n        const token = response.data;\n        localStorage.setItem('token', token);\n        const decoded = jwt_decode(token);\n        console.log(decoded.role_id);\n\n        if (decoded.role_id === 3) {\n          history.push('/students');\n        } else if (decoded.role_id === 2) {\n          history.push('/instructors/account');\n          window.location.reload();\n        } else if (decoded.role_id === 1) {\n          history.push('/admin');\n          window.location.reload();\n        }\n      }\n    }).catch(err => {\n      throw err;\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loginCont\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: logo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }\n  }, \"Log In as student or Instructor\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"l-border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Email\",\n    name: \"email\",\n    onChange: emailHandler,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Password\",\n    name: \"password\",\n    type: \"password\",\n    onChange: passHandler,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, logErr ? /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 35\n    }\n  }, \"Invalid Email or password..\") : '')), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => login(email, password),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 21\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }, \"Login to enroll in courses and more . \"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"not-sign\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, \"Don't have an account?\"), /*#__PURE__*/React.createElement(\"a\", {\n    href: \"http://localhost:3000/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, \"Sign up\")));\n};\n\nexport default Login;","map":{"version":3,"sources":["E:/JCA/Projects/Project-5/Grade-A/Front-End/src/components/Login.js"],"names":["React","useState","logo","axios","useHistory","jwt_decode","Login","history","email","setemail","password","setpassword","logErr","setlogErr","emailHandler","e","target","value","passHandler","login","post","then","response","data","token","localStorage","setItem","decoded","console","log","role_id","push","window","location","reload","catch","err"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport logo from './pics/logo.png';\r\nimport axios from 'axios';\r\nimport { useHistory } from 'react-router-dom';\r\nimport jwt_decode from 'jwt-decode';\r\n\r\nconst Login = () => {\r\n    const history = useHistory();\r\n    const [email, setemail] = useState('');\r\n    const [password, setpassword] = useState('');\r\n    const [logErr, setlogErr] = useState('');\r\n\r\n    const emailHandler = (e) => {\r\n        setemail(e.target.value);\r\n        setlogErr(false);\r\n    };\r\n    const passHandler = (e) => {\r\n        setpassword(e.target.value);\r\n        setlogErr(false);\r\n    };\r\n\r\n    const login = (email, password) => {\r\n        axios\r\n            .post(`http://localhost:5000/login`, { email, password, })\r\n            .then((response) => {\r\n                if (response.data === 'Invalid Email or password..') {\r\n                    setlogErr(true);\r\n                } else {\r\n                    const token = response.data;\r\n                    localStorage.setItem('token', token);\r\n                    const decoded = jwt_decode(token);\r\n                    console.log(decoded.role_id);\r\n                    if (decoded.role_id === 3) {\r\n                        history.push('/students');\r\n                    } else if (decoded.role_id === 2) {\r\n                        history.push('/instructors/account');\r\n                        window.location.reload();\r\n                    } else if (decoded.role_id === 1) {\r\n                        history.push('/admin');\r\n                        window.location.reload();\r\n                    }\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                throw err;\r\n            });\r\n    };\r\n\r\n    return (\r\n        <div className='loginCont'>\r\n            <div className='login'>\r\n                <div className='login-logo'>\r\n                    <img src={logo} alt=''></img>\r\n                    <p>Log In as student or Instructor</p>\r\n                    <div className='l-border'></div>\r\n                </div>\r\n                <div className='inputs'>\r\n                    <input\r\n                        placeholder='Email'\r\n                        name='email'\r\n                        onChange={emailHandler}\r\n                        required\r\n                    />\r\n                    <input\r\n                        placeholder='Password'\r\n                        name='password'\r\n                        type='password'\r\n                        onChange={passHandler}\r\n                        required\r\n                    />\r\n                    <h5>{logErr ? <span>Invalid Email or password..</span> : ''}</h5>\r\n                </div>\r\n                <div className='signup'>\r\n                    <button onClick={() => login(email, password)}>Login</button>\r\n                    <p>Login to enroll in courses and more . </p>\r\n                </div>\r\n            </div>\r\n            <div className='not-sign'>\r\n                <p>Don't have an account?</p>\r\n                <a href='http://localhost:3000/signup'>Sign up</a>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login\r\n"]},"metadata":{},"sourceType":"module"}